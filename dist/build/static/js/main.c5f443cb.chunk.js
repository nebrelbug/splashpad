(this.webpackJsonpsplash=this.webpackJsonpsplash||[]).push([[0],{16:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return r}));var a=n(15),i=n(13),o="splash-settings-sync";function r(t,n){var a={};if(e.localStorage)try{a=JSON.parse(e.localStorage.getItem(o+"/"+t))||{}}catch(i){}return a[n]}function s(t,n,r){if(e.localStorage){var s={};try{s=JSON.parse(e.localStorage.getItem(o+"/"+t))||{}}catch(l){}e.localStorage.setItem(o+"/"+t,JSON.stringify(Object(i.a)({},s,Object(a.a)({},n,r))))}}}).call(this,n(29))},194:function(e,t,n){e.exports=n(494)},199:function(e,t,n){},400:function(e,t,n){},401:function(e,t,n){},402:function(e,t,n){},403:function(e,t,n){},405:function(e,t,n){},406:function(e,t,n){},407:function(e,t,n){},489:function(e,t,n){},492:function(e,t,n){},493:function(e,t,n){},494:function(e,t,n){"use strict";n.r(t);var a=n(1),i=n.n(a),o=n(5),r=n.n(o),s=(n(199),n(15)),l=n(13),c=n(184),u=n(9),d=n(12),g=n(10),m=n(11),p=n(4),h=n(35),f=n(193),b=n(123),v=n.n(b),y=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).el=document.createElement("div"),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){document.getElementById("dialog-container").appendChild(this.el)}},{key:"componentWillUnmount",value:function(){document.getElementById("dialog-container").removeChild(this.el)}},{key:"render",value:function(){return r.a.createPortal(this.props.children,this.el)}}]),n}(a.Component),S=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).render=function(){return e.props.visible&&i.a.createElement(y,null,i.a.createElement(p.f,{id:"widget-settings-dialog",visible:e.props.visible,title:"Widget Settings",onHide:e.props.onHide,disableScrollLocking:!0,transitionEnterTimeout:50,transitionLeaveTimeout:50},e.props.children))},e}return n}(a.Component),E=n(86),k=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).render=function(){var t=e.props.settings||{};return i.a.createElement(S,{visible:e.props.visible,onHide:e.props.onHide},e.props.children,i.a.createElement(p.g,{style:{width:"calc(100% + 48px)",marginLeft:"-24px"}},i.a.createElement(p.h,{label:"Text Appearance",footer:null},i.a.createElement(p.q,{type:"switch",label:"Show Border",name:"show-border",checked:t.border,onClick:function(){e.props.onSettingsChange("border",!t.border)}}),i.a.createElement(p.p,{id:"text-widget-align",label:"Align",className:"md-cell",menuItems:[{label:"Left",value:"left"},{label:"Center",value:"center"},{label:"Right",value:"right"}],simplifiedMenu:!0,value:t.align,onChange:function(t){e.props.onSettingsChange("align",t)}}),i.a.createElement(p.s,{min:1,max:e.props.maxTextSize||15,step:1,valuePrecision:2,style:{marginTop:"10px"},leftIcon:i.a.createElement(p.j,null,"format_size"),value:t.fontSize,onChange:function(t){e.props.onSettingsChange("fontSize",t)},editable:!0}),i.a.createElement("br",null),i.a.createElement(E.TwitterPicker,{triangle:"hide",width:"100%",colors:["#000","#fff","#9e9e9e","#03a9f4","#f44336"],color:t.textColor,onChangeComplete:function(t){e.props.onSettingsChange("textColor",t.hex)}}))))},e}return n}(a.Component),w=n(19),C=n.n(w),O=n(34),j=n(175).createInstance({name:"splash-widget-content"});function x(e,t){return I.apply(this,arguments)}function I(){return(I=Object(O.a)(C.a.mark((function e(t,n){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getItem(t);case 2:return a=e.sent,e.next=5,j.setItem(t,Object(l.a)({},a,{},n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(e,t){j.getItem(e).then((function(n){n=n||{},j.setItem(e,Object(l.a)({},n,{settings:Object(l.a)({},n.settings,{},t)}))})).catch((function(e){console.log(e)}))}function T(e){return N.apply(this,arguments)}function N(){return(N=Object(O.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getItem(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(O.a)(C.a.mark((function e(t){var n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getItem(t);case 2:return n=e.sent,e.next=5,j.removeItem(t);case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(e){return F.apply(this,arguments)}function F(){return(F=Object(O.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getItem(t);case 2:if(e.t1=e.sent,e.t1){e.next=5;break}e.t1={};case 5:if(e.t0=e.t1.settings,e.t0){e.next=8;break}e.t0={};case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var L=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).startTimer=function(){a.timerID=setInterval((function(){return a.tick()}),1e3)},a.onSettingsChange=function(e,t){a.setState({settings:Object(l.a)({},a.state.settings,Object(s.a)({},e,t))},(function(){D(a.props.uniqueKey,Object(s.a)({},e,t))}))},a.state={date:new Date,settings:Object(l.a)({align:"center",fontSize:2,border:!1,textColor:"#000",displaySeconds:!0},a.props.defaultSettings),visible:!1},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;z(this.props.uniqueKey).then((function(t){if(t){console.log("settings is:"),console.log(t);var n=e.props.defaultSettings;e.setState({settings:{fontSize:t.fontSize||n.fontSize||2,align:t.align||n.align||"center",border:t.border||n.border||!1,textColor:t.textColor||n.textColor||"#000",displaySeconds:t.displaySeconds||n.displaySeconds||!1},visible:!0})}})),setTimeout(this.startTimer,Date.now()%1e3+10)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"tick",value:function(){this.setState({date:new Date})}},{key:"render",value:function(){var e=this,t=this.state.settings||{};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{position:"absolute",display:"table",width:"100%",height:"100%",visibility:this.state.visible?"visible":"hidden"},className:t.border?"splash-widget-bordered":""},i.a.createElement("div",{style:{display:"table-cell",verticalAlign:"middle"}},i.a.createElement("h2",{style:{margin:"auto",textAlign:t.align||"center",fontSize:t.fontSize+"vw",lineHeight:t.fontSize+"px",color:t.textColor||"black"}},this.state.date.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:this.state.settings.displaySeconds?"2-digit":void 0})))),i.a.createElement(k,{visible:this.props.settingsVisible,onHide:this.props.hideSettings,settings:t,onSettingsChange:this.onSettingsChange,maxTextSize:20},i.a.createElement(p.q,{type:"switch",label:"Display Seconds",name:"display-seconds",checked:t.displaySeconds,onClick:function(){e.onSettingsChange("displaySeconds",!t.displaySeconds)}})))}}]),n}(a.Component),U=(n(400),function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).onSettingsChange=function(e,t){a.setState(Object(s.a)({},e,t),(function(){x(a.props.uniqueKey,Object(s.a)({},e,t))}))},a.state={},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;T(this.props.uniqueKey).then((function(t){t?e.setState({url:t.url}):e.setState({url:"https://wikipedia.org"})}))}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{height:"100%"}},this.state.url&&i.a.createElement("iframe",{title:"Embed - "+this.props.uniqueKey,width:"100%",height:"100%",src:this.state.url||"",frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),i.a.createElement(S,{visible:this.props.settingsVisible,onHide:this.props.hideSettings},i.a.createElement(p.x,{id:"floating-center-title",label:"Embed Frame URL",lineDirection:"center",placeholder:"https://example.com/ ...",className:"md-cell md-cell--bottom",style:{width:"auto"},value:this.state.url,onChange:function(t){e.onSettingsChange("url",t)}})))}}]),n}(a.Component)),R=/open\.spotify\.com\/track\/([\w\d]+)/,A=/open\.spotify\.com\/playlist\/([\w\d]+)/,H=/open\.spotify\.com\/album\/([\w\d]+)/;n(401);var _=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).onSettingsChange=function(e,t){a.setState(Object(s.a)({},e,t),(function(){x(a.props.uniqueKey,Object(s.a)({},e,t))}))},a.state={},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;T(this.props.uniqueKey).then((function(t){t?e.setState({url:t.url}):e.setState({url:"https://open.spotify.com/embed/track/7GhIk7Il098yCjg4BQjzvb"})}))}},{key:"render",value:function(){var e,t=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{height:"100%"}},this.state.url&&i.a.createElement("iframe",{title:"Spotify embed - "+this.props.uniqueKey,width:"100%",height:"100%",src:(e=this.state.url||"",e.match(R)?"https://open.spotify.com/embed/track/"+e.match(R)[1]:e.match(A)?"https://open.spotify.com/embed/playlist/"+e.match(A)[1]:e.match(H)?"https://open.spotify.com/embed/album/"+e.match(H)[1]:e),frameBorder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})),i.a.createElement(S,{visible:this.props.settingsVisible,onHide:this.props.hideSettings},i.a.createElement(p.x,{id:"floating-center-title",label:"Playlist/Track URL",lineDirection:"center",placeholder:"https://open.spotify.com ...",className:"md-cell md-cell--bottom",style:{width:"auto"},value:this.state.url,onChange:function(e){t.onSettingsChange("url",e)}})))}}]),n}(a.Component),P=n(44),W=(n(402),function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={title:"",content:""},a.updateTitle=a.updateTitle.bind(Object(P.a)(a)),a.updateContent=a.updateContent.bind(Object(P.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;T(this.props.uniqueKey).then((function(t){t&&e.setState({title:t.title||"",content:t.content||""})}))}},{key:"updateTitle",value:function(e){var t=this;this.setState({title:e.target.value},(function(){x(t.props.uniqueKey,{title:t.state.title})}))}},{key:"updateContent",value:function(e){var t=this;this.setState({content:e.target.value},(function(){x(t.props.uniqueKey,{content:t.state.content})}))}},{key:"render",value:function(){return i.a.createElement("div",{style:{width:"100%",height:"100%"}},i.a.createElement("div",{className:"postit"},i.a.createElement("div",{className:"md-text-field-container md-full-width md-text-field-container--input",style:{width:"100%",height:"100%",padding:"10px"}},i.a.createElement("input",{placeholder:"Title",type:"text",className:"md-text-field md-text-field--margin md-full-width md-text",style:{margin:"auto",fontSize:"24px"},value:this.state.title,onChange:this.updateTitle}),i.a.createElement("textarea",{className:"postbody md-text-field md-text-field--multiline md-full-width md-text",placeholder:"Note to self...",value:this.state.content,onChange:this.updateContent}))))}}]),n}(a.Component)),q=(n(403),n(113)),M=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).onSettingsChange=function(e,t){a.setState({settings:Object(l.a)({},a.state.settings,Object(s.a)({},e,t))},(function(){D(a.props.uniqueKey,Object(s.a)({},e,t))}))},a.textInput=i.a.createRef(),a.state={value:"",settings:{searchEngine:"google"}},a.handleSubmit=a.handleSubmit.bind(Object(P.a)(a)),a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;z(this.props.uniqueKey).then((function(t){t&&e.setState({settings:Object(l.a)({},e.state.settings,{},t)})})),q.bind("/",(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1,e.textInput.current.focus()}))}},{key:"componentWillUnmount",value:function(){q.unbind("/")}},{key:"handleSubmit",value:function(e){e.preventDefault();var t,n=this.state.value.replace(" ","+"),a=this.state.settings.searchEngine||"google";"google"===a?t="https://www.google.com/search?q=".concat(n):"duckduckgo"===a?t="https://duckduckgo.com/?q=".concat(n):"stackoverflow"===a?t="https://stackoverflow.com/search?q=".concat(n):"wikipedia"===a&&(t="https://en.wikipedia.org/wiki/Special:Search?search=".concat(n)),t||(t="https://www.google.com/search?q="+n),window.location.href=t}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{position:"absolute",display:"table",width:"100%",height:"100%"}},i.a.createElement("div",{style:{display:"table-cell",verticalAlign:"middle"}},i.a.createElement(p.o,{zDepth:2,className:"splash-searchbar",style:{paddingRight:"28px",backgroundColor:"white",borderRadius:"100px"}},i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement(p.x,{id:"phone-number-with-icon-left",className:"no-search-input-x",type:"search",leftIcon:i.a.createElement(p.b,{icon:!0,style:{marginBottom:"0px",marginRight:"-4px"},onClick:function(){e.setState({value:""})}},"search"),size:10,ref:this.textInput,value:this.state.value,onChange:function(t){e.setState({value:t})}}))))),i.a.createElement(S,{visible:this.props.settingsVisible,onHide:this.props.hideSettings},i.a.createElement(p.p,{id:"select-search-engine",label:"Search Engine",className:"md-cell",style:{width:"auto"},menuItems:[{label:"Google",value:"google"},{label:"DuckDuckGo",value:"duckduckgo"},{label:"Wikipedia",value:"wikipedia"},{label:"Stack Overflow",value:"stackoverflow"}],simplifiedMenu:!0,value:this.state.settings.searchEngine,onChange:function(t){e.onSettingsChange("searchEngine",t)}})))}}]),n}(a.Component),K=n(187),G=n.n(K),V=(n(405),function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).handleChange=function(t){e.setState({content:t.target.value},(function(){x(e.props.uniqueKey,{content:e.state.content})}))},e.onSettingsChange=function(t,n){e.setState({settings:Object(l.a)({},e.state.settings,Object(s.a)({},t,n))},(function(){D(e.props.uniqueKey,Object(s.a)({},t,n))}))},e.toggleFontSize=function(){var t=e.state.settings.fontSize,n=2;t<2?n=2:t<4?n=4:t<6?n=6:t<8?n=8:t<10?n=10:t>=10&&(n=2),console.log("fontSize was ".concat(t," and is now ").concat(n)),e.onSettingsChange("fontSize",n)},e.toggleTextAlign=function(){var t=e.state.settings.align,n="center";"left"===t&&(n="center"),"right"===t&&(n="left"),"center"===t&&(n="right"),e.onSettingsChange("align",n)},e.render=function(){var t=e.state.settings||{};return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{width:"100%",height:"100%"},onDoubleClick:function(){e.setState({editing:!0},(function(){e.contentEditable.current.focus()}))},ref:e.containerDiv,onBlur:function(t){e.containerDiv.current.contains(t.relatedTarget)||e.setState({editing:!1})}},e.props.editingGrid&&!e.state.content&&i.a.createElement("p",{style:{textAlign:"center"}},"Text"),e.state.editing&&i.a.createElement(i.a.Fragment,null,i.a.createElement(p.b,{style:{height:18,width:18,padding:0,position:"absolute",top:-2,left:-2},className:"textEditButton",icon:!0,onClick:e.toggleFontSize},"format_size"),i.a.createElement(p.b,{style:{height:18,width:18,padding:0,position:"absolute",top:-2,left:18},className:"textEditButton",icon:!0,onClick:e.toggleTextAlign},"format_align_"+t.align)),i.a.createElement(G.a,{html:e.state.content,innerRef:e.contentEditable,disabled:!e.state.editing,onChange:e.handleChange,className:"textEditWidget "+(e.state.editing?"editing":"")+(e.state.settings.border?"splash-widget-bordered":""),style:{fontSize:t.fontSize+"vw",textAlign:t.align||"center",color:t.textColor||"#000"}})),i.a.createElement(k,{visible:e.props.settingsVisible,onHide:e.props.hideSettings,settings:t,onSettingsChange:e.onSettingsChange}))},e.state={content:"",editing:!1,settings:{align:"center",fontSize:2,border:!1,textColor:"#000"}},e.contentEditable=i.a.createRef(),e.containerDiv=i.a.createRef(),e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;T(this.props.uniqueKey).then((function(t){if(t){var n=t.settings||{};console.log("settings is:"),console.log(n),e.setState({content:t.content||"",settings:{fontSize:n.fontSize||2,align:n.align||"center",border:n.border||!1,textColor:n.textColor||"#000"}})}}))}}]),n}(a.Component));var J={name:"Unknown Widget",component:function(){return i.a.createElement("div",{style:{fontSize:"14px",textAlign:"center"}},i.a.createElement("p",null,"Uh-oh. Unknown widget type"))},icon:"check_box_outline_blank"},Q={note:{name:"Sticky Note",subheading:"",description:i.a.createElement("p",null,"This sticky note widget stores its content locally"),component:W,icon:"note",color:"amber",gridSettings:{minH:2,w:3,h:4}},search:{name:"Searchbar",subheading:"",component:M,icon:"search",settingsComponent:!0,gridSettings:{minH:2,minW:2,w:4}},clock:{name:"Clock",subheading:"",component:L,icon:"schedule",settingsComponent:!0},text:{name:"Text",subheading:"Double-click to edit",component:V,icon:"text_fields",settingsComponent:!0},blank:{name:"Blank Widget",subheading:"For spacing",component:function(e){var t=e.editingGrid;return i.a.createElement("div",{style:{fontSize:"12px",textAlign:"center"}},t&&i.a.createElement("p",{style:{lineHeight:1}},"Place\xadholder"))},icon:""},music:{name:"Music",subheading:"Embed playlists or tracks",description:i.a.createElement("p",null,"Currently this only supports Spotify playlists, albums, and tracks."),component:_,icon:"music_note",settingsComponent:!0},embed:{name:"Embed",subheading:"",component:U,icon:"code",settingsComponent:!0}},Y=(n(406),n(113)),$=Object.keys(Q).map((function(e){return Object(l.a)({},Q[e],{key:e})})),X=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).show=function(){a.setState({visible:!0})},a.hide=function(){a.setState({visible:!1})},a.hideDescription=function(){a.setState({description:!1})},a.toggleEditing=function(){a.setState({visible:!a.state.visible})},a.mouseOver=function(){a.setState({addButtonHovered:!0})},a.mouseOut=function(){a.setState({addButtonHovered:!1})},a.handleKeyDown=function(e){e.which||e.keyCode},a.state={visible:!1,addButtonHovered:!1,description:!1},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){Y.bind("p",this.toggleEditing)}},{key:"componentWillUnmount",value:function(){Y.unbind("p")}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{style:{position:"fixed",right:"8px",bottom:"56px",height:this.state.addButtonHovered?"96px":"48px",width:"48px"},onMouseEnter:this.mouseOver,onMouseLeave:this.mouseOut},i.a.createElement(p.b,{style:{position:"fixed",right:"8px",bottom:"56px",height:"48px",width:"48px",padding:"12px"},icon:!0,swapTheming:!0,onClick:this.show,className:"actionButton "+("light"===this.props.appSettings.buttonStyle?"light":"")},"add_circle_outline")),i.a.createElement(p.f,{id:"add-widget-dialog",visible:this.state.visible,title:"Add Widget",onHide:this.hide},i.a.createElement(p.m,{className:""},$.map((function(t,n){var a=t.name,o=t.subheading,r=t.description,s=t.key,l=t.icon,c=t.color;return i.a.createElement(p.n,{leftAvatar:i.a.createElement(p.a,{suffix:c,icon:i.a.createElement(p.j,null,l),random:!0}),onClick:function(){e.hide(),e.props.addItem(s)},primaryText:a,secondaryText:o,renderChildrenOutside:!0,key:n},i.a.createElement(p.b,{icon:!0,onClick:function(){e.setState({description:r,descriptionTitle:a})}},"info"))})))),i.a.createElement(p.f,{id:"add-widget-description",visible:!1!==this.state.description,title:this.state.descriptionTitle,onHide:this.hideDescription,focusOnMount:!1},this.state.description||i.a.createElement("p",null,"Responsive widget")))}}]),n}(i.a.PureComponent),Z=(n(407),n(408),n(409),n(59)),ee=n(87),te=n(188),ne=n(113),ae=Object(b.WidthProvider)(v.a),ie=[{i:"widget-0",x:3,y:0,w:6,h:2,minH:2,minW:2,type:"search"},{i:"widget-2",x:10,y:0,w:2,h:2,type:"clock",defaultSettings:{align:"center",fontSize:3,border:!1,textColor:"#ffffff",displaySeconds:!1}},{i:"widget-1",x:0,y:2,w:2,h:4,minH:2,type:"note"}],oe=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;Object(u.a)(this,n),(a=t.call(this,e)).toggleEditing=function(){a.setState({editing:!a.state.editing,widgetSettings:!1})},a.showWidgetSettings=function(e){a.setState({widgetSettings:e})},a.hideWidgetSettings=function(){a.setState({widgetSettings:!1})},a.onLayoutChange=function(e,t){a.setState({items:a.state.items.map((function(t,n){return Object(l.a)({},t,{},e[n])}))},(function(){Object(Z.d)(a.state.items)}))},a.toggleItemStatic=function(e){var t=a.state.items.map((function(t,n){return Object(l.a)({},t,{static:n===e?!t.static:t.static})}));a.onLayoutChange(t)},a.findPositionForItem=function(e){var t=a.state.items,n=Array.from({length:12},(function(){return[]}));function i(e,t,a,i){if(e+a>12)return!1;for(var o=e;o<e+a;o++)for(var r=t;r<t+i;r++)if(!0===n[o][r])return!1;return!0}t.forEach((function(e){for(var t=e.x;t<e.x+e.w;t++)for(var a=e.y;a<e.y+e.h;a++)n[t][a]=!0}));for(var o=0;o<1e4;o++)for(var r=0;r<12;r++)if(!0!==n[r][o]&&i(r,o,e.w,e.h))return[r,o];return console.error("Could not find a place for new item in the first 10000 rows"),[0,0]},a.onAddItem=function(e){var t=Q[e].gridSettings||{},n=Object(l.a)({i:"widget-"+a.state.widgetCount,x:0,y:0,w:2,h:2,type:e},t),i=a.findPositionForItem(n),o=Object(f.a)(i,2),r=o[0],s=o[1];n.x=r,n.y=s,a.setState({items:a.state.items.concat(n),widgetCount:a.state.widgetCount+1},(function(){Object(Z.c)(a.state.widgetCount)}))},a.onRemoveItem=function(e){var t=a.state.items[e].i;(function(e){return B.apply(this,arguments)})(t).then((function(n){a.setState({items:Object(h.a)(a.state.items).filter((function(t,n){return n!==e})),recentlyDeletedItems:[].concat(Object(h.a)(a.state.recentlyDeletedItems),[{item:a.state.items[e],timeout:setTimeout((function(){console.log("Permanently deleting item"),a.setState({recentlyDeletedItems:Object(h.a)(a.state.recentlyDeletedItems).filter((function(e){return e.item.i!==t}))})}),5e3)}]),recentlyDeletedItemContents:[].concat(Object(h.a)(a.state.recentlyDeletedItemContents),[{content:n,key:t,timeout:setTimeout((function(){console.log("Permanently deleting widget content"),a.setState({recentlyDeletedItemContents:Object(h.a)(a.state.recentlyDeletedItemContents).filter((function(e){return e.key!==t}))})}),5e3)}])})}))};var i=Object(Z.b)(),o=i.widgets,r=i.widgetCount;return a.state={items:o||[],recentlyDeletedItems:[],recentlyDeletedItemContents:[],widgetCount:r||!1,editing:!1,widgetSettings:!1},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;Object(Z.a)().then((function(t){var n=t.widgets,a=t.widgetCount;e.setState({items:n||ie,widgetCount:a||3})})),ne.bind("e",this.toggleEditing)}},{key:"componentWillUnmount",value:function(){ne.unbind("e")}},{key:"createElement",value:function(e,t){var n=this,a=e.i,o=this.state.editing&&!this.state.widgetSettings&&!this.props.appSettingsOpen,r=Q[e.type]||J,s=r.component;return i.a.createElement("div",{key:a,style:{background:o?"rgba(230, 230, 230, 0.5)":"none"}},o&&i.a.createElement(i.a.Fragment,null,i.a.createElement(p.b,{style:{height:18,width:18,padding:0,zIndex:999,float:"left",position:"absolute",top:2,left:2},className:"smallButton",icon:!0,iconEl:i.a.createElement(ee.a,{icon:te.faThumbtack}),secondary:!!e.static,swapTheming:!!e.static,onClick:function(){n.toggleItemStatic(t)}},"pin item to grid"),i.a.createElement(p.b,{style:{height:18,width:18,padding:0,zIndex:999,float:"right",position:"absolute",top:2,right:2},className:"smallButton",icon:!0,onClick:function(){var e=n.state.items[t].i;n.props.addToast("Deleted "+n.state.items[t].type+" widget",{children:"UNDO",onClick:function(){var a,i;console.log("Trying to undo delete item"),n.setState({recentlyDeletedItems:Object(h.a)(n.state.recentlyDeletedItems).filter((function(t){return t.item.i===e&&(a=t.item,clearTimeout(t.timeout)),t.item.i!==e})),recentlyDeletedItemContents:Object(h.a)(n.state.recentlyDeletedItemContents).filter((function(t){return t.key===e&&(i=t.content,console.log("Deleted item content: "),console.log(i),clearTimeout(t.timeout)),t.key!==e}))},(function(){if(a){var o=Object(h.a)(n.state.items);o.splice(t,0,a),x(e,i||{}).then((function(){n.setState({items:o})}))}}))},style:{margin:"1em"}}),n.onRemoveItem(t)}},"close")),i.a.createElement(s,{uniqueKey:a,defaultSettings:e.defaultSettings||{},settingsVisible:this.state.widgetSettings===a,hideSettings:this.hideWidgetSettings,editingGrid:this.state.editing}),o&&i.a.createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px"},className:"draggableOverlay"},i.a.createElement("div",{style:{position:"relative",top:"0",left:"0",width:"100%",height:"100%"}},i.a.createElement("div",{style:{margin:0,position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"100%"}},i.a.createElement("div",{style:{width:"min-content",margin:"auto"}},r.settingsComponent&&i.a.createElement(p.b,{style:{},className:"settingsButton",icon:!0,onClick:function(){n.showWidgetSettings(a)}},"settings"))))))}},{key:"render",value:function(){var e=this;console.log("Rendering..."),console.log(this.state.items);var t=this.state.editing&&!this.state.widgetSettings&&!this.props.appSettingsOpen;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",null,i.a.createElement(ae,Object.assign({onLayoutChange:this.onLayoutChange,layout:this.state.items,onBreakpointChange:this.onBreakpointChange,measureBeforeMount:!0,useCSSTransforms:!0,isDraggable:t,isResizable:t,preventCollision:!0,draggableCancel:".editButton"},this.props),this.state.items.map((function(t,n){return e.createElement(t,n)})))),!1!==this.state.widgetCount&&i.a.createElement(X,Object.assign({addItem:this.onAddItem},this.props)),i.a.createElement(p.b,{style:{position:"fixed",right:8,bottom:8,height:48,width:48,padding:12},icon:!0,swapTheming:!0,onClick:this.toggleEditing,className:"actionButton "+("light"===this.props.appSettings.buttonStyle?"light":"")},this.state.editing?"done":"edit"))}}]),n}(i.a.Component);oe.defaultProps={className:"layout",cols:12,rowHeight:35,compactType:null};var re=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={color:e.props.initialColor},e.handleChange=function(t){e.setState({color:t.hex})},e.handleChangeComplete=function(t){e.props.handleChangeComplete(t.hex),e.setState({color:t.hex})},e}return Object(d.a)(n,[{key:"render",value:function(){return i.a.createElement(E.SketchPicker,{color:this.state.color,onChange:this.handleChange,onChangeComplete:this.handleChangeComplete,disableAlpha:!0,presetColors:["#fafafa","#ffcdd2","#bbdefb","#b3e5fc","#c8e6c9","#fff9c4","#fff0b2","#d7ccc8","#eee","#ef9a9a","#90caf9","#81d4fa","#a5d6a7","#fff59d","#ffcc80","#b39ddb","#9e9e9e","#f44336","#2196f3","#03a9f4","#4caf50","#ffeb3b","#ff9800","#FFFFFF"]})}}]),n}(a.Component),se=n(22),le=n.n(se),ce=n(189),ue=n.n(ce),de=(n(412),n(489),function(e){var t,n=e.progress,a=e.onAbortClick,o=e.file;return"number"!==typeof n?null:(o&&o.name&&(t=i.a.createElement("p",null,"Uploading ".concat(o.name,"."))),i.a.createElement("header",{className:"md-cell md-cell--12"},i.a.createElement(p.l,{id:"file-upload-progress",value:n}),t,i.a.createElement(p.b,{raised:!0,onClick:a},"Abort")))}),ge=n(2),me=n.n(ge);var pe=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(u.a)(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={},e.formatter=Intl.DateTimeFormat("en-US"),e.gcd=function(t,n){return 0===n?t:e.gcd(n,t%n)},e.findClosestAspectRatio=function(t){var n=t.target,a=n.naturalHeight,i=n.naturalWidth,o=e.gcd(i,a);i/o<a/o&&e.setState({aspectRatio:"1-1"})},e.removeCard=function(){e.props.onRemoveClick(e.props.file)},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.file,t=e.name,n=(e.size,e.lastModified,e.data),a=(e.type,i.a.createElement("img",{src:n,alt:t}));return a=i.a.createElement("div",{className:"aspect-ratio"},a),i.a.createElement(p.c,{className:me()("file-inputs__upload-card")},i.a.createElement(p.b,{icon:!0,onClick:this.removeCard,className:"file-inputs__upload-card__remove"},"close"),a,i.a.createElement(p.d,{title:"".concat(t)}))}}]),n}(a.PureComponent),he={"aria-busy":!0,"aria-describedby":"file-upload-progress"},fe=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).setFileUpload=function(e){a.fileUpload=e},a.setFile=function(e){a.setState({file:e})},a.abortUpload=function(){a.fileUpload&&a.fileUpload.abort(),a.setState({file:null,progress:null,showButton:!0})},a.handleLoad=function(e,t){var n=e.name,i=e.size,o=e.type,r=e.lastModified,s={id:ue()(),name:n,size:i,type:o,data:t,lastModified:new Date(r)};a.props.onLoadImage(s),a.timeout=setTimeout((function(){a.timeout=null,a.setState({progress:null})}),1e3),a.setState({file:s,progress:100,showButton:!1})},a.handleProgress=function(e,t){a.state.file&&a.setState({progress:t})},a.removeFile=function(e){a.setState({file:null,showButton:!0}),a.props.removeImage()},console.log("props.initialImage"),console.log(e.initialImage),a.state={progress:null,file:e.initialImage,showButton:!0},a}return Object(d.a)(n,[{key:"componentWillUnmount",value:function(){this.timeout&&clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this.state,t=e.progress,n=e.file,a=n&&i.a.createElement(pe,{key:n.id,file:n,onRemoveClick:this.removeFile});return i.a.createElement("div",null,i.a.createElement(de,{progress:t,onAbortClick:this.abortUpload,file:n}),i.a.createElement(le.a,Object.assign({component:"section",transitionName:"md-cross-fade",transitionEnterTimeout:300,transitionLeave:!1},"number"===typeof t?he:void 0),a),i.a.createElement(p.i,{accept:"image/*",id:"background-image-upload",secondary:!0,name:"background-image-upload",ref:this.setFileUpload,label:this.state.file?"Upload New Image":"Upload Image",onLoadStart:this.setFile,onProgress:this.handleProgress,onLoad:this.handleLoad}))}}]),n}(a.PureComponent),be=n(16),ve=Object(be.a)("appearance","backgroundColor")||"#fafafa",ye=Object(be.a)("appearance","backgroundImage")||null,Se=Object(be.a)("appearance","backgroundImageDarkness")||.2,Ee=Object(be.a)("appearance","backgroundImageURL")||"./background-images/white-mountain.jpg",ke=Object(be.a)("appearance","background")||"image-url";function we(e){document.body.style.background=e,ve=e,Object(be.b)("appearance","backgroundColor",e),Object(be.b)("appearance","background","color")}function Ce(e,t){e&&e.data&&(document.body.style["background-image"]="linear-gradient(\n        rgba(0, 0, 0, ".concat(t,"), \n        rgba(0, 0, 0, ").concat(t,")\n      ), url(").concat(e.data,")"),ye=e,Object(be.b)("appearance","backgroundImage",e),Object(be.b)("appearance","background","image"),Object(be.b)("appearance","backgroundImageDarkness",t))}function Oe(e,t){e&&(document.body.style["background-image"]="linear-gradient(\n        rgba(0, 0, 0, ".concat(t,"), \n        rgba(0, 0, 0, ").concat(t,")\n      ), url(").concat(e,")"),Ee=e,Object(be.b)("appearance","backgroundImageURL",e),Object(be.b)("appearance","background","image-url"),Object(be.b)("appearance","backgroundImageDarkness",t))}var je=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).onLoadImage=function(e){console.log(e),Ce(e,Se)},e.onRemoveImage=function(){ke="color",e.setState({background:"color"}),we(ve),ye=null,Object(be.b)("appearance","backgroundImage",null),Object(be.b)("appearance","background","color")},e.onDarknessChange=function(t){var n=e.state.background;"image"===n?Ce(ye,t):"image-url"===n&&Oe(Ee,t),Se=t},e.state={background:ke,backgroundImageURL:Ee},e}return Object(d.a)(n,[{key:"render",value:function(){var e=this;return i.a.createElement(p.g,null,i.a.createElement(p.h,{label:"Background",footer:null},i.a.createElement(p.k,{className:"grid-example"},i.a.createElement(p.e,{size:4},i.a.createElement(p.r,{id:"selection-control-group-radios",name:"radio-example",type:"radio",value:this.state.background,onChange:function(t){e.setState({background:t}),ke=t,"color"===t?we(ve):"image"===t?Ce(ye,Se):"image-url"===t&&Oe(Ee,Se)},controls:[{label:"Color",value:"color"},{label:"Image URL",value:"image-url"},{label:"Upload Image",value:"image"}]})),i.a.createElement(p.e,{size:4},"color"===this.state.background&&i.a.createElement(re,{initialColor:ve,handleChangeComplete:we}),"image-url"===this.state.background&&i.a.createElement(i.a.Fragment,null,i.a.createElement(p.x,{id:"edit-background-image",label:"Background Image URL",lineDirection:"center",placeholder:"https://example.com/image.jpg",style:{width:"auto"},value:Ee,inlineIndicator:i.a.createElement(p.b,{icon:!0,className:"text-fields__inline-btn",onClick:function(){Ee="./background-images/white-mountain.jpg",Oe("./background-images/white-mountain.jpg",Se),e.setState({backgroundImageURL:"./background-images/white-mountain.jpg"})}},"settings_backup_restore"),onChange:function(t){Ee=t,Oe(t,Se),e.setState({backgroundImageURL:t})}}),i.a.createElement("br",null)," ",i.a.createElement("br",null),Ee&&i.a.createElement(i.a.Fragment,null,i.a.createElement(p.c,{className:"file-inputs__upload-card"},i.a.createElement("div",{className:"aspect-ratio"},i.a.createElement("img",{src:Ee,alt:"Wallpaper"})),i.a.createElement(p.d,{title:"Background Image"})),i.a.createElement(p.s,{id:"darken-image-url-slider",label:"Darken Image",min:0,max:1,step:.1,valuePrecision:2,defaultValue:Se,onChange:this.onDarknessChange,discrete:!0}))),"image"===this.state.background&&i.a.createElement(i.a.Fragment,null,i.a.createElement(fe,{initialImage:ye,onLoadImage:this.onLoadImage,removeImage:this.onRemoveImage}),i.a.createElement("br",null)," ",i.a.createElement("br",null),ye&&ye.data&&i.a.createElement(p.s,{id:"custom-range-step-slider",label:"Darken Image",min:0,max:1,step:.1,valuePrecision:2,defaultValue:Se,onChange:this.onDarknessChange,discrete:!0}))))),i.a.createElement(p.h,{label:"Buttons",footer:null},i.a.createElement(p.r,{id:"action-button-style",name:"action-button-select",type:"radio",value:this.props.settings.buttonStyle,onChange:function(t){e.props.onSettingsChange("appearance","buttonStyle",t)},label:"Button Style",controls:[{label:"Dark",value:"dark"},{label:"Light",value:"light"}]})))}}]),n}(a.Component),xe=n(190),Ie=(n(492),function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){var e=this.props.visible;return i.a.createElement(p.f,{id:"splash-settings-dialog",visible:e,onHide:this.props.onHide,transitionEnterTimeout:10,transitionLeaveTimeout:10,"aria-labelledby":"settings-dialog",height:"500px",width:"80%",className:"settings-dialog"},i.a.createElement(p.w,{colored:!0,primary:!0},i.a.createElement(p.v,{tabId:"simple-tab"},i.a.createElement(p.u,{label:"Appearance"},i.a.createElement(je,this.props)),i.a.createElement(p.u,{label:"Miscellaneous"},i.a.createElement("h3",null,"More settings coming soon!")),i.a.createElement(p.u,{label:"About"},i.a.createElement("div",null,i.a.createElement("h1",{style:{margin:"auto",width:"fit-content",marginBottom:"20px"}},"Splashpad"),i.a.createElement("p",null,"Splashpad is completely open-source and will remain free forever. All of my work on it is unpaid and in my free time."),i.a.createElement("p",null,"I would deeply appreciate donations, as a gesture of gratitude and as funding for future development of Splashpad."),i.a.createElement(p.b,{raised:!0,primary:!0,iconEl:i.a.createElement(ee.a,{icon:xe.faPaypal}),href:"https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=48CUT8BYGFRAQ&item_name=Help+fund+my+development+of+Splashpad%21&currency_code=USD&source=url",style:{height:"36px",marginBottom:"6px"}},"Donate with PayPal!"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("b",null,"Links"),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("a",{href:"https://github.com/nebrelbug/splash"},"GitHub repository"))))),i.a.createElement(p.u,{label:"Support"},i.a.createElement("h1",{style:{margin:"auto",width:"fit-content",marginBottom:"20px"}},"Support"),i.a.createElement("p",null,"We're sorry you're having trouble!"),i.a.createElement("p",null,"Try creating a GitHub issue at"," ",i.a.createElement("a",{href:"https://github.com/nebrelbug/splashpad/issues"},"the GitHub repository, or browse through existing issues"))))))}}]),n}(a.Component)),De=n(191),Te=n.n(De),Ne=(n(493),function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).addToast=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];a.setState((function(a){var i=a.toasts.slice();return i.push({text:e,action:t}),{toasts:i,autohide:n}}))},a.dismissToast=function(){var e=Object(c.a)(a.state.toasts).slice(1);a.setState({toasts:e})},a.toggleSettings=function(){a.setState({settingsOpen:!a.state.settingsOpen})},a.onSettingsChange=function(e,t,n){a.setState({settings:Object(l.a)({},a.state.settings,Object(s.a)({},t,n))},(function(){Object(be.b)(e,t,n)}))},a.state={settingsOpen:!1,settings:{buttonStyle:Object(be.a)("appearance","buttonStyle")||"light"},toasts:[],autohide:!0},a}return Object(d.a)(n,[{key:"getChildContext",value:function(){return{inkDisabled:!0}}}]),Object(d.a)(n,[{key:"render",value:function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{ref:this.divRef},i.a.createElement(Ie,{visible:this.state.settingsOpen,onHide:this.toggleSettings,settings:this.state.settings,onSettingsChange:this.onSettingsChange}),i.a.createElement(p.b,{style:{position:"fixed",left:8,bottom:8,height:48,width:48,padding:12,zIndex:999},icon:!0,swapTheming:!0,onClick:this.toggleSettings,className:"actionButton "+("light"===this.state.settings.buttonStyle?"light":"")},this.state.settingsOpen?"check":"settings"),i.a.createElement(oe,{appSettingsOpen:this.state.settingsOpen,appSettings:this.state.settings,addToast:this.addToast,dismissToast:this.dismissToast})),i.a.createElement(p.t,{id:"splash-snackbar",toasts:this.state.toasts,autohide:this.state.autohide,autohideTimeout:4500,onDismiss:this.dismissToast}))}}]),n}(a.PureComponent));Ne.childContextTypes=Te.a;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Be=n(192);n.n(Be).a.load({google:{families:["Roboto:300,400,500,700","Material Icons"]}}),r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},59:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return g}));var a=n(19),i=n.n(a),o=n(34),r=(n(15),n(13),n(175)),s=r.createInstance({name:"splash-widgets",driver:r.LOCALSTORAGE});function l(e){s.setItem("widgets",e)}function c(){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.getItem("widgets");case 2:return t=e.sent,e.next=5,s.getItem("current-widget-count");case 5:return n=e.sent,e.abrupt("return",{widgets:t,widgetCount:n});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){var t=[],n={};if(e.localStorage)try{t=JSON.parse(e.localStorage.getItem("splash-widgets/widgets"))||[],n=Number(e.localStorage.getItem("splash-widgets/current-widget-count"))||3}catch(a){}return{widgets:t,widgetCount:n}}function g(e){s.setItem("current-widget-count",e)}}).call(this,n(29))}},[[194,1,2]]]);
//# sourceMappingURL=main.c5f443cb.chunk.js.map